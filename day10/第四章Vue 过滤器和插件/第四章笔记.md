# 第五章 Vue 过滤器和插件

## 5.1 过滤器

### 5.1.1 什么是过滤器

![img](file:///media\wps532.png)过滤器对将要显示的文本，先进行特定格式化处理，然后再进行显示
![img](file:///media\wps531.png)注意：过滤器并没有改变原本的数据, 只是产生新的对应的数据 

### 5.1.2 使用方式

1. 定义过滤器：

   ![img](file:///media\wps533.png)全局过滤器：

  ![img](file:///media\wps534.png)

![img](file:///media\wps535.png)局部过滤器：在Vue实例中使用 filter 选项 ， 当前实例范围内可用 

​      ![img](file:///media\wps537.png) 

2. 过滤器可以用在两个地方：**双花括号** {{}} **和** v-bind **表达式** ![img](file:///media\wps540.png)

### 5.1.3 案例演示

![img](file:///media\wps541.png)需求：

1. 实现过滤敏感字符，如当文本中有 tmd、sb 都将进行过滤掉

2. 过滤器传入多个参数 ，实现求和运算

![img](file:///media\wps542.png)实现：

1. 新建 vue-04-过滤器和插件 目录， 安装 vue.js 模块 

2. 在 vue-04-过滤器和插件 目录下创建 01-过滤器.html 

```html
<body>
    <div id="app">
        <h3>过滤器接收多个参数：</h3>
        <p>{{content | contentFilter}}</p>
        <input type="text" :value="content | sensitive">
        <h3>过滤器接收多个参数：</h3>
        <p>{{vueScore | add(javaScore, pythonScore)}}</p>
    </div>
    <script src="node_modules/vue/dist/vue.js" type="text/javascript"></script>
    <script type="text/javascript">
        /*定义全局过滤器: 过滤敏感数据*/
        /*Vue.filter('contentFilter',function (value) {
        if (!value) return ''
        return value.toUpperCase().replace('TMD','***').replace('SB','***')
        })*/
        new Vue({
            el: '#app',
            data: {
                content: '小伙子，TMD就是个SB',
                vueScore: 80,
                javaScore: 95,
                pythonScore: 90
            },
            //局部过滤器
            filters: { //不要少了 s
                contentFilter(value) { //value是调用时 | 左边的那个属性值
                    if (!value) return ''
                    return value.toUpperCase().replace('TMD', '***').replace('SB', '***')
                },
                add(num1, num2, num3) { //num1是调用时 | 左边的那个属性值
                    return num1 + num2 + num3
                }
            }
        })
    </script>
</body>
```

## 5.2 自定义插件

### 5.2.1 插件的作用

1. 插件通常会为 Vue 添加全局功能，一般是添加全局方法/全局指令/过滤器等
2. Vue 插件有一个公开方法 install ，通过 install 方法给 Vue 添加全局功能
3. 通过全局方法 Vue.use() 使用插件，它需要在你调用 new Vue() 启动应用之前完成 

### 5.2.2 案例演示

1. 开发插件, 在 vue-04-过滤器和插件 目录下创建 js 目录，在 js 目录建一个 plugins.js 文件 

```js
(function () {
        // 声明 MyPlugin 插件对象
        const MyPlugin = {}
        MyPlugin.install = function (Vue, options) {
            // 1. 添加全局方法
            Vue.myGlobalMethod = function () {
                alert('MyPlugin插件: 全局方法生效')
            } 
            // 2. 添加全局指令
            Vue.directive('my-directive', {
                inserted: function (el, binding) {
                    el.innerHTML = "MyPlugin插件 my-directive:" + binding.value
                }
            })
            // 3. 添加实例方法
            Vue.prototype.$myMethod = function (methodOption) {
                alert('Vue 实例方法生效：' + methodOption)
            }
        } 
            // 将插件添加到 window 对象中
        window.MyPlugin = MyPlugin
    })() // 不要少了括号()，让它立即执行
```

2. 使用插件, 在 vue-04-过滤器和插件 目录下创建 02-自定义插件.html 

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>14-自定义插件</title>
</head>

<body>
    <div id="app">
        <!-- 引用指令时不要少了 v- -->
        <span v-my-directive="content"></span>
    </div>
    <script src="../js/vue.js" type="text/javascript"></script>
    <script src="js/plugins.js" type="text/javascript"></script>
    <script type="text/javascript">
        // 1.引入自定义插件 MyPlugin
        // 如果报错:Uncaught ReferenceError: MyPlugin is not defined
        // 解决方法: 查看 plugins.js 是否引入，如果引入还是报错，检查 js 语法，特别是最后一行不要少了括号 ()
        Vue.use(MyPlugin)
        // 2. 创建 Vue 实例, 模板中使用引用全局指令 v-my-directive="content"
        var vm = new Vue({
            el: '#app',
            data: {
                content: 'hello'
            }
        })
        // 3. 调用自定义的全局方法, 所以是 Vue 调用，不是 vm
        Vue.myGlobalMethod()
        // 4. 调用 Vue 实例方法，所以是 vm 调用，不是 Vue
        vm.$myMethod('ceshi')
    </script>
</body>
</body>

</html>
```



 

 